# VPN-AP dnsmasq configuration
# DHCP and DNS server for access point clients

# Listen only on the AP interface
interface=wlan1

# Don't use /etc/resolv.conf - we'll use VPN's DNS
no-resolv

# Upstream DNS servers (Cloudflare - will be routed through VPN)
server=1.1.1.1
server=1.0.0.1

# Alternative: Use NordVPN's DNS servers
# server=103.86.96.100
# server=103.86.99.100

# DHCP range and lease time
# Assigns IPs from 192.168.4.50 to 192.168.4.150
dhcp-range=192.168.4.50,192.168.4.150,255.255.255.0,24h

# Set the router (gateway) to the Pi's AP interface IP
dhcp-option=option:router,192.168.4.1

# Set DNS server to the Pi itself
dhcp-option=option:dns-server,192.168.4.1

# Domain name for local network
domain=vpn.local
local=/vpn.local/

# Don't read /etc/hosts
no-hosts

# Log DHCP transactions (useful for debugging)
log-dhcp

# Bind only to specified interfaces
bind-interfaces

# Never forward plain names (without a dot)
domain-needed

# Never forward addresses in non-routed address spaces
bogus-priv

# Cache DNS queries
cache-size=1000
